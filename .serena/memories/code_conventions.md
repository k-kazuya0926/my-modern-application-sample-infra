# コード規約とスタイル

## Terraform規約

### ファイル構成
- **標準モジュール構造**: `main.tf`, `variables.tf`, `outputs.tf`
- **環境分離**: `environments/prod/`下に環境固有設定
- **モジュール化**: `modules/`下に再利用可能コンポーネント

### 命名規則
- **リソース命名**: `${var.github_repository_name}-${var.env}-${specific_name}`
- **モジュール命名**: サービス名をベースにした分かりやすい名前
- **変数命名**: スネークケース、具体的で説明的な名前

### 変数とドキュメント
- **description**: **日本語で記述する**（重要な規約）
- **型指定**: 必須（`type = string`, `type = number`など）
- **デフォルト値**: 適切に設定
- **バリデーション**: 必要に応じて実装

### セキュリティパターン
- **IAM**: Lambda関数ごとの個別実行ロール
- **最小権限**: `policy_statements`による具体的な権限定義
- **ロール分離**: 共有ロール禁止

### リソース設定
- **Lambda**: コンテナパッケージング必須（ZIPファイル禁止）
- **ログ保持**: CloudWatch Logsの保持期間設定可能
- **X-Rayトレーシング**: 関数ごとにオプション設定
- **環境変数**: Terraform経由での注入

## コード品質
- **バージョン固定**: Terraform、AWS Provider共にバージョン固定
- **モジュール設計**: DRY原則に従った再利用可能設計
- **状態管理**: メインインフラとデータストアの分離
- **動的設定**: `count`パラメータによる条件付きリソース作成